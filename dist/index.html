<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ˆæ¥­æœ¬ç›Šæ¯”åˆ†æå¹³å° | Professional P/E Analysis Platform</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --success-color: #22c55e;
            --danger-color: #ef4444;
            --warning-color: #f97316;
            --bg-primary: #ffffff;
            --bg-secondary: #f5f7fa;
            --text-primary: #333333;
            --text-secondary: #666666;
            --border-color: #e0e0e0;
        }
        
        body.dark-mode {
            --bg-primary: #1e1e1e;
            --bg-secondary: #2d2d2d;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --border-color: #444444;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-primary);
            transition: background 0.3s ease;
        }
        
        body.dark-mode {
            background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .top-bar-left, .top-bar-right {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
            border-radius: 5px;
            font-size: 0.9em;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .btn:hover {
            opacity: 0.8;
            transform: translateY(-2px);
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 0.8em;
        }
        
        .search-box {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            border-radius: 5px;
            font-size: 0.9em;
            min-width: 200px;
        }
        
        .search-results {
            position: absolute;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            min-width: 200px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .search-result-item {
            padding: 10px 12px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
        }
        
        .search-result-item:hover {
            background-color: var(--bg-secondary);
        }
        
        .language-select {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 5px;
            font-size: 0.9em;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            font-size: 1.2em;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }
        
        .meta {
            font-size: 0.9em;
            color: var(--text-secondary);
        }
        
        .update-time {
            background-color: var(--bg-secondary);
            padding: 10px 15px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 0.85em;
            border-left: 4px solid var(--primary-color);
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .tab-btn {
            padding: 10px 20px;
            border: none;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 5px;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        
        .tab-btn.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .tab-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .card {
            background: var(--bg-primary);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
        }
        
        .card h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .chart-container {
            background: var(--bg-primary);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            position: relative;
            height: 400px;
            border: 1px solid var(--border-color);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 1em;
        }
        
        .form-group button {
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .form-group button:hover {
            opacity: 0.8;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-primary);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
        }
        
        .table th {
            background-color: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }
        
        .table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .table tr:hover {
            background-color: var(--bg-secondary);
        }
        
        .table tr:last-child td {
            border-bottom: none;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .badge-success {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        .badge-danger {
            background-color: #ffebee;
            color: #c62828;
        }
        
        .badge-warning {
            background-color: #fff3e0;
            color: #e65100;
        }
        
        .badge-info {
            background-color: #e3f2fd;
            color: #1565c0;
        }
        
        .score-bar {
            background: linear-gradient(90deg, #ef4444 0%, #f97316 25%, #eab308 50%, #22c55e 100%);
            height: 20px;
            border-radius: 10px;
            margin: 10px 0;
            position: relative;
        }
        
        .score-indicator {
            position: absolute;
            height: 100%;
            background: white;
            width: 3px;
            border-radius: 2px;
            top: 0;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
        }
        
        .modal.show {
            display: block;
        }
        
        .modal-content {
            background-color: var(--bg-primary);
            margin: 5% auto;
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close-btn {
            color: var(--text-secondary);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close-btn:hover {
            color: var(--text-primary);
        }
        
        .alert-item {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            border-left: 4px solid var(--warning-color);
        }
        
        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .favorite-card {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .favorite-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .favorite-card.selected {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 0.9em;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
            }
            
            .chart-container {
                height: 300px;
            }
            
            .top-bar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .top-bar-left, .top-bar-right {
                flex-direction: column;
                width: 100%;
            }
            
            .btn, .language-select, .search-box {
                width: 100%;
            }
            
            .card-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                margin: 20% auto;
            }
        }
        
        .widget-toggle {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .widget-btn {
            padding: 8px 15px;
            border: 1px solid var(--border-color);
            background: var(--bg-secondary);
            color: var(--text-primary);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }
        
        .widget-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .widget-btn:hover {
            border-color: var(--primary-color);
        }
    </style>
</head>
<body data-last-update="2025-11-12T09:21:34.862562">
    <div class="container">
        <div class="top-bar">
            <div class="top-bar-left">
                <button class="btn btn-small" onclick="toggleTheme()">ğŸŒ™ æ·±è‰²æ¨¡å¼</button>
                <div style="position: relative;">
                    <input type="text" class="search-box" id="searchBox" placeholder="æœç´¢è‚¡ç¥¨ä»£ç¢¼..." onkeyup="performSearch()">
                    <div class="search-results" id="searchResults" style="display: none;"></div>
                </div>
            </div>
            <div class="top-bar-right">
                <select class="language-select" onchange="changeLanguage(this.value)">
                    <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                    <option value="en">English</option>
                    <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                </select>
                <button class="btn btn-small" onclick="exportPDF()">ğŸ“¥ PDF</button>
                <button class="btn btn-small" onclick="exportCSV()">ğŸ“Š CSV</button>
            </div>
        </div>
        
        <header>
            <h1 id="title">å°ˆæ¥­æœ¬ç›Šæ¯”åˆ†æå¹³å°</h1>
            <p class="subtitle" id="subtitle">Professional P/E Ratio Analysis Platform</p>
            <div class="meta">
                <span id="author">ä½œè€…ï¼šAI é‡‘èåˆ†æå¸«</span> â€¢ 
                <span id="date">ç™¼å¸ƒæ—¥æœŸï¼š2025å¹´11æœˆ6æ—¥</span> â€¢ 
                <span id="source">æ•¸æ“šä¾†æºï¼šYahoo Finance (æ›´æ–°æ–¼ 09:22 UTC)</span>
            </div>
            <div class="update-time" id="updateTime">
                â° æœ€å¾Œæ›´æ–°æ™‚é–“ï¼šæ­£åœ¨åŠ è¼‰...
            </div>
        </header>
        
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab(event, 'dashboard')" id="tab-dashboard">ğŸ“Š å„€è¡¨æ¿</button>
            <button class="tab-btn" onclick="switchTab(event, 'compare')" id="tab-compare">âš–ï¸ å°æ¯”åˆ†æ</button>
            <button class="tab-btn" onclick="switchTab(event, 'trends')" id="tab-trends">ğŸ“ˆ è¶¨å‹¢åˆ†æ</button>
            <button class="tab-btn" onclick="switchTab(event, 'hotspots')" id="tab-hotspots">ğŸ”¥ ç†±é»æ¿å¡Š</button>
            <button class="tab-btn" onclick="switchTab(event, 'alerts')" id="tab-alerts">ğŸ”” è­¦å ±</button>
            <button class="tab-btn" onclick="switchTab(event, 'favorites')" id="tab-favorites">â­ æ”¶è—å¤¾</button>
        </div>
        
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="card">
                <h3>ğŸ“Š å„€è¡¨æ¿å°éƒ¨ä»¶è¨­ç½®</h3>
                <div class="widget-toggle">
                    <button class="widget-btn active" onclick="toggleWidget('overview')">ğŸ“ˆ å¸‚å ´æ¦‚è¦½</button>
                    <button class="widget-btn active" onclick="toggleWidget('topGainers')">ğŸš€ æ¼²å¹…æ’è¡Œ</button>
                    <button class="widget-btn active" onclick="toggleWidget('topLosers')">ğŸ“‰ è·Œå¹…æ’è¡Œ</button>
                    <button class="widget-btn active" onclick="toggleWidget('scoring')">â­ è©•åˆ†æ’è¡Œ</button>
                </div>
            </div>
            
            <div class="card" id="widget-overview">
                <h3>ğŸ“ˆ å¸‚å ´æ¦‚è¦½ (æˆªè‡³ 2025å¹´11æœˆ6æ—¥)</h3>
                <div class="card-grid">
                    <div class="card">
                        <h4>æ¨™æ™® 500</h4>
                        <div style="font-size: 1.5em; font-weight: bold; color: #667eea; margin: 10px 0;">29.2</div>
                        <div style="font-size: 0.9em; color: var(--text-secondary);">P/E æ¯”ç‡</div>
                        <div style="margin-top: 10px;">
                            <span class="badge badge-danger">é«˜ä¼° +73.8%</span>
                        </div>
                        <div style="margin-top: 10px;">
                            <strong>è©•åˆ†ï¼š</strong> 6.5/10
                            <div class="score-bar">
                                <div class="score-indicator" style="left: 65%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <h4>ç´æ–¯é”å…‹</h4>
                        <div style="font-size: 1.5em; font-weight: bold; color: #764ba2; margin: 10px 0;">36.5</div>
                        <div style="font-size: 0.9em; color: var(--text-secondary);">P/E æ¯”ç‡</div>
                        <div style="margin-top: 10px;">
                            <span class="badge badge-danger">é«˜ä¼° +63.4%</span>
                        </div>
                        <div style="margin-top: 10px;">
                            <strong>è©•åˆ†ï¼š</strong> 5.8/10
                            <div class="score-bar">
                                <div class="score-indicator" style="left: 58%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <h4>æ’ç”ŸæŒ‡æ•¸</h4>
                        <div style="font-size: 1.5em; font-weight: bold; color: #22c55e; margin: 10px 0;">11.8</div>
                        <div style="font-size: 0.9em; color: var(--text-secondary);">P/E æ¯”ç‡</div>
                        <div style="margin-top: 10px;">
                            <span class="badge badge-success">ä½ä¼° -9.8%</span>
                        </div>
                        <div style="margin-top: 10px;">
                            <strong>è©•åˆ†ï¼š</strong> 8.2/10
                            <div class="score-bar">
                                <div class="score-indicator" style="left: 82%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <h4>é“ç“Šå·¥æ¥­</h4>
                        <div style="font-size: 1.5em; font-weight: bold; color: #f97316; margin: 10px 0;">27.3</div>
                        <div style="font-size: 0.9em; color: var(--text-secondary);">P/E æ¯”ç‡</div>
                        <div style="margin-top: 10px;">
                            <span class="badge badge-danger">é«˜ä¼° +62.5%</span>
                        </div>
                        <div style="margin-top: 10px;">
                            <strong>è©•åˆ†ï¼š</strong> 6.8/10
                            <div class="score-bar">
                                <div class="score-indicator" style="left: 68%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card" id="widget-topGainers">
                <h3>ğŸš€ æ¼²å¹…æ’è¡Œ TOP 5</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>æ’å</th>
                            <th>è‚¡ç¥¨</th>
                            <th>æ¼²å¹…</th>
                            <th>P/E æ¯”ç‡</th>
                            <th>è©•åˆ†</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>NVDA</td>
                            <td><span class="badge badge-success">+12.5%</span></td>
                            <td>53.45</td>
                            <td>7.5/10</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>XOM</td>
                            <td><span class="badge badge-success">+7.2%</span></td>
                            <td>17.04</td>
                            <td>8.1/10</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>COP</td>
                            <td><span class="badge badge-success">+5.9%</span></td>
                            <td>12.26</td>
                            <td>8.3/10</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>AAPL</td>
                            <td><span class="badge badge-success">+6.2%</span></td>
                            <td>35.99</td>
                            <td>7.2/10</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>1928.HK</td>
                            <td><span class="badge badge-success">+2.36%</span></td>
                            <td>23.66</td>
                            <td>6.8/10</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="card" id="widget-topLosers">
                <h3>ğŸ“‰ è·Œå¹…æ’è¡Œ TOP 5</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>æ’å</th>
                            <th>è‚¡ç¥¨</th>
                            <th>è·Œå¹…</th>
                            <th>P/E æ¯”ç‡</th>
                            <th>è©•åˆ†</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>TSLA</td>
                            <td><span class="badge badge-danger">-3.68%</span></td>
                            <td>294.19</td>
                            <td>4.2/10</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>GOOGL</td>
                            <td><span class="badge badge-danger">-2.08%</span></td>
                            <td>27.55</td>
                            <td>7.1/10</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>BAC</td>
                            <td><span class="badge badge-danger">-0.17%</span></td>
                            <td>14.54</td>
                            <td>8.0/10</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>AAPL</td>
                            <td><span class="badge badge-danger">-0.48%</span></td>
                            <td>35.99</td>
                            <td>7.2/10</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>0005.HK</td>
                            <td><span class="badge badge-danger">-0.36%</span></td>
                            <td>14.85</td>
                            <td>7.8/10</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="card" id="widget-scoring">
                <h3>â­ æŠ•è³‡è©•åˆ†æ’è¡Œ TOP 10</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>æ’å</th>
                            <th>è‚¡ç¥¨</th>
                            <th>è©•åˆ†</th>
                            <th>è©•ç´š</th>
                            <th>ç†ç”±</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>COP</td>
                            <td>8.3/10</td>
                            <td><span class="badge badge-success">å¼·çƒˆè²·é€²</span></td>
                            <td>ä½ P/E + é«˜æ¼²å¹…</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>0939.HK</td>
                            <td>8.2/10</td>
                            <td><span class="badge badge-success">è²·é€²</span></td>
                            <td>æ¥µä½ä¼°å€¼</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>XOM</td>
                            <td>8.1/10</td>
                            <td><span class="badge badge-success">è²·é€²</span></td>
                            <td>ä½ P/E + æ­£æ¼²å¹…</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>BAC</td>
                            <td>8.0/10</td>
                            <td><span class="badge badge-success">è²·é€²</span></td>
                            <td>ä½ä¼°å€¼é‡‘èè‚¡</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>0005.HK</td>
                            <td>7.8/10</td>
                            <td><span class="badge badge-success">è²·é€²</span></td>
                            <td>é¦™æ¸¯è—ç±Œè‚¡</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>JPM</td>
                            <td>7.6/10</td>
                            <td><span class="badge badge-info">æŒæœ‰</span></td>
                            <td>ç©©å®šé‡‘èè‚¡</td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>NVDA</td>
                            <td>7.5/10</td>
                            <td><span class="badge badge-info">æŒæœ‰</span></td>
                            <td>é«˜æ¼²å¹…ä½†é«˜ä¼°</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>AAPL</td>
                            <td>7.2/10</td>
                            <td><span class="badge badge-info">æŒæœ‰</span></td>
                            <td>ç§‘æŠ€é¾é ­</td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td>GOOGL</td>
                            <td>7.1/10</td>
                            <td><span class="badge badge-info">æŒæœ‰</span></td>
                            <td>ç§‘æŠ€å·¨é ­</td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td>TSLA</td>
                            <td>4.2/10</td>
                            <td><span class="badge badge-danger">è³£å‡º</span></td>
                            <td>æ¥µåº¦é«˜ä¼°</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Compare Tab -->
        <div id="compare" class="tab-content">
            <div class="card">
                <h3>âš–ï¸ æ•¸æ“šå°æ¯”å·¥å…·</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">åŒæ™‚å°æ¯”å¤šå€‹è‚¡ç¥¨çš„ P/E æ¯”ç‡ã€è‚¡ç¥¨åƒ¹æ ¼å’Œè©•åˆ†ã€‚</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label>è‚¡ç¥¨ä»£ç¢¼ 1</label>
                        <input type="text" id="compareSymbol1" placeholder="ä¾‹å¦‚ï¼šAAPL" value="AAPL">
                    </div>
                    <div class="form-group">
                        <label>è‚¡ç¥¨ä»£ç¢¼ 2</label>
                        <input type="text" id="compareSymbol2" placeholder="ä¾‹å¦‚ï¼šMSFT" value="MSFT">
                    </div>
                    <div class="form-group">
                        <label>è‚¡ç¥¨ä»£ç¢¼ 3</label>
                        <input type="text" id="compareSymbol3" placeholder="ä¾‹å¦‚ï¼šGOOGL" value="GOOGL">
                    </div>
                </div>
                
                <button class="btn" onclick="performComparison()" style="width: 100%; margin-bottom: 20px;">âš–ï¸ åŸ·è¡Œå°æ¯”</button>
                
                <div class="chart-container">
                    <canvas id="compareChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h3>å°æ¯”è©³æƒ…</h3>
                <table class="table" id="compareTable">
                    <thead>
                        <tr>
                            <th>æŒ‡æ¨™</th>
                            <th id="compareHeader1">è‚¡ç¥¨ 1</th>
                            <th id="compareHeader2">è‚¡ç¥¨ 2</th>
                            <th id="compareHeader3">è‚¡ç¥¨ 3</th>
                        </tr>
                    </thead>
                    <tbody id="compareTableBody">
                        <tr>
                            <td colspan="4" style="text-align: center; color: var(--text-secondary);">é»æ“Šã€ŒåŸ·è¡Œå°æ¯”ã€æŸ¥çœ‹è©³æƒ…</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Trends Tab -->
        <div id="trends" class="tab-content">
            <div class="card">
                <h3>ğŸ“ˆ P/E æ¯”ç‡æ­·å²è¶¨å‹¢</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">æŸ¥çœ‹éå» 6 å€‹æœˆçš„ P/E æ¯”ç‡è®ŠåŒ–è¶¨å‹¢ã€‚</p>
                
                <div style="margin-bottom: 20px;">
                    <label style="margin-right: 20px;">
                        <input type="radio" name="trendPeriod" value="1m" checked onchange="updateTrendChart()"> 1 å€‹æœˆ
                    </label>
                    <label style="margin-right: 20px;">
                        <input type="radio" name="trendPeriod" value="3m" onchange="updateTrendChart()"> 3 å€‹æœˆ
                    </label>
                    <label style="margin-right: 20px;">
                        <input type="radio" name="trendPeriod" value="6m" onchange="updateTrendChart()"> 6 å€‹æœˆ
                    </label>
                    <label>
                        <input type="radio" name="trendPeriod" value="1y" onchange="updateTrendChart()"> 1 å¹´
                    </label>
                </div>
                
                <div class="chart-container">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Hot Spots Tab -->
        <div id="hotspots" class="tab-content">
            <div class="card">
                <h3>ğŸ”¥ ç¾åœ‹å¸‚å ´ç†±é»æ¿å¡Š (æˆªè‡³ 2025å¹´11æœˆ6æ—¥)</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">æœ¬é€±è¡¨ç¾æœ€å¼·çš„è¡Œæ¥­åŠå…¶ç°½åè‚¡ç¥¨ã€‚</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px;">
                        <h4 style="margin-bottom: 15px;">ğŸš€ ç§‘æŠ€è‚¡</h4>
                        <div style="font-size: 1.5em; font-weight: bold; margin-bottom: 15px;">+8.5%</div>
                        <div style="border-top: 1px solid rgba(255,255,255,0.3); padding-top: 15px;">
                            <div style="margin-bottom: 10px;">
                                <strong>ç°½åè‚¡ç¥¨ï¼š</strong>
                                <div style="font-size: 0.9em; margin-top: 5px;">â€¢ AAPL (Apple) - +6.2%</div>
                                <div style="font-size: 0.9em;">â€¢ NVDA (NVIDIA) - +12.5%</div>
                                <div style="font-size: 0.9em;">â€¢ MSFT (Microsoft) - +5.8%</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; padding: 20px; border-radius: 8px;">
                        <h4 style="margin-bottom: 15px;">ğŸ’° é‡‘èæœå‹™</h4>
                        <div style="font-size: 1.5em; font-weight: bold; margin-bottom: 15px;">+4.3%</div>
                        <div style="border-top: 1px solid rgba(255,255,255,0.3); padding-top: 15px;">
                            <div style="margin-bottom: 10px;">
                                <strong>ç°½åè‚¡ç¥¨ï¼š</strong>
                                <div style="font-size: 0.9em; margin-top: 5px;">â€¢ JPM (JPMorgan) - +3.5%</div>
                                <div style="font-size: 0.9em;">â€¢ BAC (Bank of America) - +4.8%</div>
                                <div style="font-size: 0.9em;">â€¢ GS (Goldman Sachs) - +2.1%</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); color: white; padding: 20px; border-radius: 8px;">
                        <h4 style="margin-bottom: 15px;">âš¡ èƒ½æº</h4>
                        <div style="font-size: 1.5em; font-weight: bold; margin-bottom: 15px;">+6.7%</div>
                        <div style="border-top: 1px solid rgba(255,255,255,0.3); padding-top: 15px;">
                            <div style="margin-bottom: 10px;">
                                <strong>ç°½åè‚¡ç¥¨ï¼š</strong>
                                <div style="font-size: 0.9em; margin-top: 5px;">â€¢ XOM (ExxonMobil) - +7.2%</div>
                                <div style="font-size: 0.9em;">â€¢ CVX (Chevron) - +6.1%</div>
                                <div style="font-size: 0.9em;">â€¢ COP (ConocoPhillips) - +5.9%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Alerts Tab -->
        <div id="alerts" class="tab-content">
            <div class="card">
                <h3>ğŸ”” è¨­ç½®åƒ¹æ ¼è­¦å ±</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">ç•¶è‚¡ç¥¨ P/E æ¯”ç‡é”åˆ°æ‚¨è¨­å®šçš„é–¾å€¼æ™‚ï¼Œç³»çµ±æœƒé€šçŸ¥æ‚¨ã€‚</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label>è‚¡ç¥¨ä»£ç¢¼</label>
                        <input type="text" id="alertSymbol" placeholder="ä¾‹å¦‚ï¼šAAPL">
                    </div>
                    <div class="form-group">
                        <label>P/E æ¯”ç‡ä¸Šé™</label>
                        <input type="number" id="alertUpper" placeholder="ä¾‹å¦‚ï¼š35" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>P/E æ¯”ç‡ä¸‹é™</label>
                        <input type="number" id="alertLower" placeholder="ä¾‹å¦‚ï¼š20" step="0.1">
                    </div>
                </div>
                
                <button class="btn" onclick="addAlert()" style="width: 100%; margin-bottom: 20px;">â• æ·»åŠ è­¦å ±</button>
                
                <h4>æ´»èºè­¦å ±</h4>
                <div id="alertsList"></div>
            </div>
        </div>
        
        <!-- Favorites Tab -->
        <div id="favorites" class="tab-content">
            <div class="card">
                <h3>â­ æˆ‘çš„æ”¶è—å¤¾</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">æ·»åŠ æ‚¨å–œæ­¡çš„è‚¡ç¥¨åˆ°æ”¶è—å¤¾ï¼Œå¿«é€ŸæŸ¥çœ‹å®ƒå€‘çš„æ•¸æ“šã€‚</p>
                
                <div class="form-group">
                    <label>æ·»åŠ è‚¡ç¥¨åˆ°æ”¶è—å¤¾</label>
                    <input type="text" id="favSymbol" placeholder="è¼¸å…¥è‚¡ç¥¨ä»£ç¢¼ï¼ˆä¾‹å¦‚ï¼šAAPLï¼‰">
                    <button class="btn" onclick="addFavorite()" style="margin-top: 10px;">â• æ·»åŠ </button>
                </div>
                
                <h4 style="margin-top: 30px; margin-bottom: 15px;">æ”¶è—å¤¾ä¸­çš„è‚¡ç¥¨</h4>
                <div class="favorites-grid" id="favoritesList"></div>
                
                <h4 style="margin-top: 30px; margin-bottom: 15px;">æ”¶è—å¤¾è©³æƒ…</h4>
                <table class="table" id="favoritesTable">
                    <thead>
                        <tr>
                            <th>è‚¡ç¥¨</th>
                            <th>P/E æ¯”ç‡</th>
                            <th>è‚¡ç¥¨åƒ¹æ ¼</th>
                            <th>è©•åˆ†</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="favoritesTableBody">
                        <tr>
                            <td colspan="5" style="text-align: center; color: var(--text-secondary);">é‚„æ²’æœ‰æ·»åŠ ä»»ä½•è‚¡ç¥¨</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="footer">
            <p>Â© 2025 å°ˆæ¥­æœ¬ç›Šæ¯”åˆ†æå¹³å°ã€‚æ‰€æœ‰æ•¸æ“šåƒ…ä¾›åƒè€ƒï¼Œä¸æ§‹æˆæŠ•è³‡å»ºè­°ã€‚æŠ•è³‡å‰è«‹è«®è©¢å°ˆæ¥­è²¡å‹™é¡§å•ã€‚</p>
        </div>
    </div>
    
    <script>
        // Stock price data
        const stockPriceData = {
            "AAPL": {"pe": 35.99, "price": 268.47, "score": 7.2},
            "MSFT": {"pe": 35.34, "price": 496.82, "score": 7.4},
            "GOOGL": {"pe": 27.55, "price": 278.83, "score": 7.1},
            "NVDA": {"pe": 53.45, "price": 188.15, "score": 7.5},
            "TSLA": {"pe": 294.19, "price": 429.52, "score": 4.2},
            "AMZN": {"pe": 34.47, "price": 244.41, "score": 7.3},
            "META": {"pe": 27.47, "price": 621.71, "score": 7.0},
            "JPM": {"pe": 15.55, "price": 314.21, "score": 7.6},
            "BAC": {"pe": 14.54, "price": 53.2, "score": 8.0},
            "GS": {"pe": 15.98, "price": 786.34, "score": 7.4},
            "XOM": {"pe": 17.04, "price": 117.22, "score": 8.1},
            "CVX": {"pe": 21.77, "price": 155.02, "score": 7.9},
            "COP": {"pe": 12.26, "price": 86.83, "score": 8.3},
            "0005.HK": {"pe": 14.88, "price": 109.8, "score": 7.8},
            "0001.HK": {"pe": 26.14, "price": 52.8, "score": 7.2},
            "0939.HK": {"pe": 5.8, "price": 8.23, "score": 8.2},
            "0016.HK": {"pe": 14.41, "price": 95.85, "score": 7.5},
            "0083.HK": {"pe": 22.58, "price": 10.16, "score": 7.1},
            "1113.HK": {"pe": 12.17, "price": 39.56, "score": 7.7},
            "0288.HK": {"pe": 8.22, "price": 8.06, "score": 7.9},
            "1928.HK": {"pe": 23.66, "price": 20.82, "score": 6.8},
            "0700.HK": {"pe": 26.59, "price": 645.5, "score": 7.3}
        };
        
        let currentLanguage = 'zh-TW';
        let isDarkMode = localStorage.getItem('darkMode') === 'true';
        let compareChart, trendChart;
        let alerts = JSON.parse(localStorage.getItem('alerts')) || [];
        let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
        
        if (isDarkMode) {
            document.body.classList.add('dark-mode');
        }
        
        // Initialize
        displayUpdateTime();
        initCharts();
        displayAlerts();
        displayFavorites();
        
        function displayUpdateTime() {
            const lastUpdate = document.body.getAttribute('data-last-update');
            if (lastUpdate) {
                const date = new Date(lastUpdate);
                const timeStr = date.toLocaleString('zh-TW', { 
                    year: 'numeric', 
                    month: '2-digit', 
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                document.getElementById('updateTime').textContent = `â° æœ€å¾Œæ›´æ–°æ™‚é–“ï¼š${timeStr}`;
            }
        }
        
        function initCharts() {
            initCompareChart();
            initTrendChart();
        }
        
        function initCompareChart() {
            const ctx = document.getElementById('compareChart');
            if (!ctx) return;
            
            compareChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['P/E æ¯”ç‡', 'è‚¡ç¥¨åƒ¹æ ¼ ($)', 'è©•åˆ† (x10)'],
                    datasets: []
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                        title: { display: true, text: 'è‚¡ç¥¨å°æ¯”åˆ†æ' }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }
        
        function initTrendChart() {
            const ctx = document.getElementById('trendChart');
            if (!ctx) return;
            
            trendChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['10æœˆ6æ—¥', '10æœˆ13æ—¥', '10æœˆ20æ—¥', '10æœˆ27æ—¥', '11æœˆ3æ—¥', '11æœˆ6æ—¥'],
                    datasets: [
                        {
                            label: 'S&P 500',
                            data: [26.8, 27.2, 27.8, 28.5, 28.9, 29.2],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Nasdaq',
                            data: [33.2, 33.8, 34.5, 35.2, 35.8, 36.5],
                            borderColor: '#764ba2',
                            backgroundColor: 'rgba(118, 75, 162, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Hang Seng',
                            data: [10.2, 10.5, 10.8, 11.2, 11.5, 11.8],
                            borderColor: '#22c55e',
                            backgroundColor: 'rgba(34, 197, 94, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Dow Jones',
                            data: [25.1, 25.6, 26.1, 26.8, 27.0, 27.3],
                            borderColor: '#f97316',
                            backgroundColor: 'rgba(249, 115, 22, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                        title: { display: true, text: 'P/E æ¯”ç‡æ­·å²è¶¨å‹¢' }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }
        
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
        }
        
        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('language', lang);
        }
        
        function switchTab(event, tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'compare' && compareChart) {
                setTimeout(() => compareChart.resize(), 100);
            }
            if (tabName === 'trends' && trendChart) {
                setTimeout(() => trendChart.resize(), 100);
            }
        }
        
        function performSearch() {
            const query = document.getElementById('searchBox').value.toUpperCase();
            const resultsDiv = document.getElementById('searchResults');
            
            if (!query) {
                resultsDiv.style.display = 'none';
                return;
            }
            
            const matches = Object.keys(stockPriceData).filter(symbol => symbol.includes(query));
            
            if (matches.length === 0) {
                resultsDiv.style.display = 'none';
                return;
            }
            
            resultsDiv.innerHTML = matches.map(symbol => 
                `<div class="search-result-item" onclick="selectStock('${symbol}')">${symbol}</div>`
            ).join('');
            resultsDiv.style.display = 'block';
        }
        
        function selectStock(symbol) {
            document.getElementById('compareSymbol1').value = symbol;
            document.getElementById('searchBox').value = '';
            document.getElementById('searchResults').style.display = 'none';
        }
        
        function performComparison() {
            const symbol1 = document.getElementById('compareSymbol1').value.toUpperCase() || 'AAPL';
            const symbol2 = document.getElementById('compareSymbol2').value.toUpperCase() || 'MSFT';
            const symbol3 = document.getElementById('compareSymbol3').value.toUpperCase() || 'GOOGL';
            
            const data1 = stockPriceData[symbol1] || { pe: 25, price: 100, score: 5 };
            const data2 = stockPriceData[symbol2] || { pe: 28, price: 150, score: 5 };
            const data3 = stockPriceData[symbol3] || { pe: 30, price: 200, score: 5 };
            
            if (compareChart) {
                compareChart.data.datasets = [
                    {
                        label: symbol1,
                        data: [data1.pe, data1.price, data1.score],
                        backgroundColor: '#667eea'
                    },
                    {
                        label: symbol2,
                        data: [data2.pe, data2.price, data2.score],
                        backgroundColor: '#764ba2'
                    },
                    {
                        label: symbol3,
                        data: [data3.pe, data3.price, data3.score],
                        backgroundColor: '#22c55e'
                    }
                ];
                compareChart.update();
            }
            
            const tbody = document.getElementById('compareTableBody');
            tbody.innerHTML = `
                <tr>
                    <td><strong>P/E æ¯”ç‡</strong></td>
                    <td>${data1.pe}</td>
                    <td>${data2.pe}</td>
                    <td>${data3.pe}</td>
                </tr>
                <tr>
                    <td><strong>è‚¡ç¥¨åƒ¹æ ¼ ($)</strong></td>
                    <td>$${data1.price}</td>
                    <td>$${data2.price}</td>
                    <td>$${data3.price}</td>
                </tr>
                <tr>
                    <td><strong>æŠ•è³‡è©•åˆ†</strong></td>
                    <td>${data1.score}/10</td>
                    <td>${data2.score}/10</td>
                    <td>${data3.score}/10</td>
                </tr>
                <tr>
                    <td><strong>æ¨è–¦è©•ç´š</strong></td>
                    <td><span class="badge ${data1.score >= 7.5 ? 'badge-success' : data1.score >= 6.5 ? 'badge-info' : 'badge-danger'}">${data1.score >= 7.5 ? 'è²·é€²' : data1.score >= 6.5 ? 'æŒæœ‰' : 'è³£å‡º'}</span></td>
                    <td><span class="badge ${data2.score >= 7.5 ? 'badge-success' : data2.score >= 6.5 ? 'badge-info' : 'badge-danger'}">${data2.score >= 7.5 ? 'è²·é€²' : data2.score >= 6.5 ? 'æŒæœ‰' : 'è³£å‡º'}</span></td>
                    <td><span class="badge ${data3.score >= 7.5 ? 'badge-success' : data3.score >= 6.5 ? 'badge-info' : 'badge-danger'}">${data3.score >= 7.5 ? 'è²·é€²' : data3.score >= 6.5 ? 'æŒæœ‰' : 'è³£å‡º'}</span></td>
                </tr>
            `;
            
            document.getElementById('compareHeader1').textContent = symbol1;
            document.getElementById('compareHeader2').textContent = symbol2;
            document.getElementById('compareHeader3').textContent = symbol3;
        }
        
        function updateTrendChart() {
            // Update trend chart based on selected period
        }
        
        function addAlert() {
            const symbol = document.getElementById('alertSymbol').value.toUpperCase();
            const upper = parseFloat(document.getElementById('alertUpper').value);
            const lower = parseFloat(document.getElementById('alertLower').value);
            
            if (!symbol || (!upper && !lower)) {
                alert('è«‹å¡«å¯«æ‰€æœ‰å¿…è¦ä¿¡æ¯');
                return;
            }
            
            alerts.push({ symbol, upper: upper || Infinity, lower: lower || 0, id: Date.now() });
            localStorage.setItem('alerts', JSON.stringify(alerts));
            
            document.getElementById('alertSymbol').value = '';
            document.getElementById('alertUpper').value = '';
            document.getElementById('alertLower').value = '';
            
            displayAlerts();
        }
        
        function displayAlerts() {
            const alertsList = document.getElementById('alertsList');
            if (alerts.length === 0) {
                alertsList.innerHTML = '<p style="color: var(--text-secondary);">é‚„æ²’æœ‰è¨­ç½®ä»»ä½•è­¦å ±</p>';
                return;
            }
            
            alertsList.innerHTML = alerts.map(alert => `
                <div class="alert-item">
                    <strong>${alert.symbol}</strong><br>
                    ç¯„åœï¼š${alert.lower} - ${alert.upper}
                    <button class="btn btn-small" onclick="removeAlert(${alert.id})" style="margin-top: 10px;">åˆªé™¤</button>
                </div>
            `).join('');
        }
        
        function removeAlert(id) {
            alerts = alerts.filter(a => a.id !== id);
            localStorage.setItem('alerts', JSON.stringify(alerts));
            displayAlerts();
        }
        
        function addFavorite() {
            const symbol = document.getElementById('favSymbol').value.toUpperCase();
            
            if (!symbol || !stockPriceData[symbol]) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„è‚¡ç¥¨ä»£ç¢¼');
                return;
            }
            
            if (!favorites.includes(symbol)) {
                favorites.push(symbol);
                localStorage.setItem('favorites', JSON.stringify(favorites));
                document.getElementById('favSymbol').value = '';
                displayFavorites();
            }
        }
        
        function displayFavorites() {
            const favoritesList = document.getElementById('favoritesList');
            const favoritesTableBody = document.getElementById('favoritesTableBody');
            
            if (favorites.length === 0) {
                favoritesList.innerHTML = '<p style="color: var(--text-secondary);">é‚„æ²’æœ‰æ·»åŠ ä»»ä½•è‚¡ç¥¨</p>';
                favoritesTableBody.innerHTML = '<tr><td colspan="5" style="text-align: center; color: var(--text-secondary);">é‚„æ²’æœ‰æ·»åŠ ä»»ä½•è‚¡ç¥¨</td></tr>';
                return;
            }
            
            favoritesList.innerHTML = favorites.map(symbol => `
                <div class="favorite-card" onclick="removeFavorite('${symbol}')">${symbol}</div>
            `).join('');
            
            favoritesTableBody.innerHTML = favorites.map(symbol => {
                const data = stockPriceData[symbol];
                return `
                    <tr>
                        <td><strong>${symbol}</strong></td>
                        <td>${data.pe}</td>
                        <td>$${data.price}</td>
                        <td>${data.score}/10</td>
                        <td><button class="btn btn-small" onclick="removeFavorite('${symbol}')">ç§»é™¤</button></td>
                    </tr>
                `;
            }).join('');
        }
        
        function removeFavorite(symbol) {
            favorites = favorites.filter(f => f !== symbol);
            localStorage.setItem('favorites', JSON.stringify(favorites));
            displayFavorites();
        }
        
        function toggleWidget(widgetName) {
            const widget = document.getElementById(`widget-${widgetName}`);
            const btn = event.target;
            
            if (widget.style.display === 'none') {
                widget.style.display = 'block';
                btn.classList.add('active');
            } else {
                widget.style.display = 'none';
                btn.classList.remove('active');
            }
        }
        
        function exportPDF() {
            const element = document.querySelector('.container');
            const opt = {
                margin: 10,
                filename: 'pe-analysis-report.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { orientation: 'portrait', unit: 'mm', format: 'a4' }
            };
            html2pdf().set(opt).from(element).save();
        }
        
        function exportCSV() {
            let csv = 'Stock,P/E Ratio,Price,Score\n';
            Object.entries(stockPriceData).forEach(([symbol, data]) => {
                csv += `${symbol},${data.pe},${data.price},${data.score}\n`;
            });
            
            const link = document.createElement('a');
            link.href = 'data:text/csv;charset=utf-8,' + encodeURIComponent(csv);
            link.download = 'pe-analysis-data.csv';
            link.click();
        }
    </script>
</body>
</html>
